<!DOCTYPE html>
<html>

<head>
    <title>Rate Limiter test page</title>
</head>

<body>
    <script type="module">
        import RateLimiter from "./dist/rate-limitation.esm.js"; 
        const asyncAdd = (...args) => {
            // a very long and useful async task
            return new Promise(resolve => {
                setTimeout(() => {
                    const result = args.reduce((a, b) => { return a + b; }, 0);
                    console.log(result);
                    resolve(result);
                }, 5000);
            });
        };

        const rateLimiter = new RateLimiter(2);
        rateLimiter.enqueue(asyncAdd, this, 1,2,3,4,5);
        rateLimiter.enqueue(asyncAdd, this, 1,2,3,4,5);
        rateLimiter.enqueue(asyncAdd, this, 1,2,3,4,5); // this will be executed after 5000ms
        rateLimiter.enqueue(asyncAdd, this, 1,2,3,4,5); // this will be executed after 5000ms
    </script>
</body>

</html>